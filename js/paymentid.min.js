/*!
 * Cirquity - Cirquity v1.2.0 (https://cirquity.com)
 * Copyright 2020-2021 The Cirquity Developers
 * Licensed under MIT (https://github.com/cirquity/cirquity-explorer/blob/master/LICENSE)
 */

!function(t){let e,a,n;t((function(){currentPage="payment";let a=setInterval((function(){appReady&&(e=t.urlParam("hash"),t.updateText("payment-id",e),t.getTransactions(),clearInterval(a))}),10)})),t.getTransactions=function(){a&&a.abort(),n=t.parseJSON(sessionStorage.getItem("txsByPaymentId")),n?t.renderPaymentTransactions(n):a=t.ajax({url:api+"/json_rpc",method:"POST",data:JSON.stringify({jsonrpc:"2.0",id:"paymentId",method:"k_transactions_by_payment_id",params:{payment_id:e}}),dataType:"json",cache:"false",success:function(e){let a=e.result.transactions;t.renderPaymentTransactions(a)}}),sessionStorage.removeItem("txsByPaymentId")},t.renderPaymentTransactions=function(e){let a=t("#transactions-rows");for(let n=0;n<e.length;n++){let s=e[n],r=JSON.stringify(s),o=document.getElementById("transactionRow"+s.hash);if(o&&o.getAttribute("data-json")!==r)t(o).replaceWith(t.getPaymentTransactionRowElement(s,r));else if(!o){let e=t.getPaymentTransactionRowElement(s,r);a.append(e)}}},t.getPaymentTransactionRowElement=function(e,a){let n=document.createElement("tr");return n.setAttribute("data-json",a),n.setAttribute("data-hash",e.hash),n.setAttribute("id","transactionRow"+e.hash),n.innerHTML=t.getPaymentTransactionCells(e),n},t.getPaymentTransactionCells=function(e){return'<th scope="row">'+t.formatPaymentLink(e.hash)+"</th><td>"+t.getReadableCoins(e.fee,coinDisplayDecimals,!0)+"</td><td>"+t.getReadableCoins(e.amount_out,coinDisplayDecimals,!0)+"</td><td>"+t.localizeNumber(e.size)+"</td>"}}(jQuery);